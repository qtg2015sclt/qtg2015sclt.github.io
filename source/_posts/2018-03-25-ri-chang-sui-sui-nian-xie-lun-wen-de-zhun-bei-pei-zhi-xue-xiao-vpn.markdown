---
layout: post
title: "日常碎碎念-写论文的准备: 配置学校vpn"
date: 2018-03-25 00:54:30 +0800
comments: true
categories: nonsense
---
> 闲来无聊来随便聊聊. 就当在讲单口相声, 但并没有相声有趣, 爬走...

要写毕业论文, 就要看论文, 由于学院特(辣)殊(鸡), 人不在校内, 没法在知网看论文, 所以学校给提供了 vpn 来访问知网.

然而关于怎么在 macOS 上配置, 学校官网上给的方案不清楚, 只好自己必应/百度(/谷歌), 最后还是找到了办法.

接着就发现, 要下的一个 driver(或者用 tunnelclick 也行) 需要科学上网才行, 而我今年没有续费之前使用的科学上网, 因为我当时觉得可以用学校提供的vpn 来酱酱酿酿(后来室友告诉我其实访问是有很多限制的), 而现在该怎么办? 于是我就默默点了一支烟(并不), 思考起来:
<!--more-->

- 要连上学校的 vpn 首先要下这个驱动
- 要下这个驱动的话先要连上学校的 vpn or 科学上网

死循环了.

当然我可以去公司下. 但是我意识到了没有科学上网简直寸步难行...所以干脆给多态兄续了一年.

就按照之前搜到的方法来. 在配置文件时卡了一下, 没写 cert 的绝对路径, 又搜了下在 macOS 上怎么获取一个文件的绝对路径: 直接把文件拖到 terminal 里面就会显示其绝对路径了.
然后就发现根本用错了 cert... 换过来就好了.

也是坑, 学校没给直接下载一个 crt 文件, 而是打开了个网页显示了内容, 要自己手动把内容保存到本地后缀为 crt. 好吧虽然也很简单, 但就这破问题之前在公司遇到时也难了我一下(不知道该拿这堆内容如何是好), 现在倒是一回生二回熟了.

好了我现在可以正常访问知网了, 开心.

### --- 2018年04月10日 update: ---
然而最近无线慢得令人发指, 说是龟速都是在赞美它, 不开 vpn 还能勉强用个网, 开了之后打不开任何网页...

忽而想起宿舍还有个有线网可以用, 但是我的笔电它, 没!有!网!线!接!口!
买了个网卡转接, 但无法用之前的联通的配置使用, 换了移动和电信也不行...难道是教育网...

最后用IPsec/L2TP配置vpn的方法解决的:

设置->网络->左下角'+'号添加新服务->接口选VPN->类型选IPsec上的L2TP->服务名称自己随便填->点'创建'->服务器地址是学校给的, 账户是在学校注册的账户(以及密码)->打开鉴定设置, 填密码和密钥(密钥也是学校给的)->点'好'->点'应用'->点'连接'

然而连不上.
我恨'然而'.

再次仔细浏览教程, 发现:
>注意: 高级选项中需要选择"通过VPN发送所有流量"
以下信息供参考：
以上设置使用的是安全的IPsec加密，但某些环境下无法正常工作，可以试一试以下设置：
sudo vi /etc/ppp/options  增加如下两行
L2TP.ppp
l2tpnoipsec

哦. 点'高级', 把'通过VPN发送所有流量'这一项勾选上.
然后照做后面的设置.

然而还是连不上.
我恨, 我好恨.

搜了一下, 找到一位仁兄的博客: [Mac OSX 无共享的密钥情况下连接基于L2TP协议的VPN](https://blog.csdn.net/wswqiang/article/details/24553399)
>options 文件中 输入以下内容
plugin L2TP.ppp
l2tpnoipsec

比之前多一个'plugin', 我已经破罐破摔了, 照做.
连上了.
科科.


-真 END-
